//@version=6
// インジケーター名: 「EMA + 一目均衡表 + BB（ストラテジー）」
// 
// 概要:
// 本インジケーターは、複数の指数移動平均（EMA）とローソク足パターン「包み線」を用いた売買シグナルを提供します。
// 
// 主な機能:
// - 5本のEMA（5, 25, 50, 100, 200）をプロット
// - EMA5とEMA25のクロスによる売買シグナルを表示
//   ・買い：EMA5が25を上抜け ＋ 価格が雲の下
//   ・売り：EMA5が25を下抜け ＋ 価格が雲の上
// - ボリンジャーバンドを表示（中心線、上下バンド）
// - 出来高が急騰したときにシグナル（●）を表示
// - 一目均衡表を表示
// - 上記シグナルに対応したアラート条件も設定済み

strategy('EMA + 一目均衡表 + BB（ストラテジー）', overlay = true, initial_capital = 1000000, default_qty_type = strategy .percent_of_equity, default_qty_value = 100)

// ===== library import =====
import ise0615/EMA_Ichimoku_BB_Function/2 as lib

// パラメーター設定
src = input.source(close, "元データ")
res = lib.calc(src, 5, 25, 50, 100, 200, 20, 2.0, 9, 26, 52, 26)


// ==============================
// ストラテジー
// ==============================

// 買いシグナル
if res.emaBuy
    strategy.entry("Long", strategy.long)

// 売りシグナル
if res.emaSell
    strategy.entry("Short", strategy.short)
